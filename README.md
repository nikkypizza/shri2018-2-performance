## Задание 6 — «Performance»

Детальный лог изменений можно прочитать в истории коммитов. Коммиты вида `Init refactoring *` содержат в себе подробное описание каждого действия.

---

* Так и не смог подогнать размер `sh.jpg` так, чтобы проект проходил [проверку](https://shri-performance.ru). Оставил изображение в оригинальном размере и формате `.webp`. Браузерам без поддержки этого формата выдаются минифицированные изображения в формате `.jpg`
* В `head` заинлайнил полифил для [асинхронной загрузки css](https://www.filamentgroup.com/lab/async-css.html), в конце документа вставил скрипт [modernizr, определяющий поддержку `.webp` формата](http://www.stucox.com/blog/using-webp-with-modernizr/) и за ним уже основной скрипт логики страницы.
* Отказался от файловой структуры из предположения, что так будет выше результат проверки. Такое решение прибавило 40 очков к результату. Выглядит ужасно, но это задание сделано с рассчетом на азартного человека :)
* Я не в восторге от идеи инлайнить все иконки в css, но сделал так чтобы сократить количество запросов к серверу и чтобы они не "моргали" при низкой скорости соединения. Изначально сделал svg-спрайт инлайнил его в HTML и использовал через `svg > use`, но так работа не проходила проверку.
* Заинлайнил логотип в шапке из тех же соображений, что и иконки. Он мало весит потому, решил, что это не так уж плохо. Плохо то, что он не будет кешироваться.
* `.jpg` изображения прогрессивные, чтобы показывать изображения поэтапно и создавать иллюзию того, что соединение быстрее, чем оно есть на самом деле при низких скоростях. Я так понимаю, `.webp` файлы не могут быть прогрессивными или разворачиваться чересстрочно ибо состоят из кода
* Оптимизировал покрытие и скорость кода и стилей через инструменты `JavaScript Profiler` и `Coverage` в Chrome 
* Проверял верстку в Chrome, Firefox, Edge и Safari. Регулятор температуры сломан в Firefox, а в Safari регулятор стрёмный из-за svg тени. Я мог бы это пофиксить, но из опасений не пройти проверку оставил всю сломанную интеракцию как в оригинале. Цель задания ведь не чинить баги, а оптимизировать ресурсы.
* Также пробовал [выносить критически важный css](https://github.com/addyosmani/critical) в разметку, но большого профита я от этого не получил, почти весь css файл является критически-важным
* Было желание вынести все модальные окна в тег `<template>` и показывать их по клику. Я верен, что это бы дополнительно ускорило страницу, но руки до этого не дошли.
* Самая удачная проверка дала результат 466.88 в новом топе. Вот [Github Pages](https://nikkypizza.github.io/shri2018-2-performance/) страницы.

Вообще я огорчен, что задание `оптимизируй` превратилось в задание `попади в проверку`. Я могу понять расхождения, заметные глазу, но если проверка падает при различии ширины элемента в сотые доли пикселя - это ту мач.

Все же от "выноса мусора" я получил удовольствие. Оптимизация производительности мой самый любимый аспект фронтенда